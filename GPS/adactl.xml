<?xml version="1.0" ?>

<!--  This file adds support for AdaControl -->

<AdaControl>
 
 <!--  Rules syntax -->

 <Language>
  <Name>AdaControl Rules File</Name>
  <Extension>.aru</Extension>
  <Keywords>^(check|search)\b</Keywords>

  <Context>
   <New_Line_Comment_Start>--</New_Line_Comment_Start>
   <String_Delimiter>&quot;</String_Delimiter>
   <Constant_Character>&apos;</Constant_Character>
   <Can_Indent>False</Can_Indent>
   <Syntax_Highlighting>True</Syntax_Highlighting>
   <Case_Sensitive>False</Case_Sensitive>
  </Context>

  <Categories>
   <Category>
    <Name>entry</Name>
    <Pattern>^[ \t]*(\w+)[ \t]*:</Pattern>
    <Index>1</Index>
   </Category>
   <Category>
    <Name>namespace</Name>
    <Pattern>(check|search)[ \t]+(\w+)</Pattern>
    <Index>2</Index>
   </Category>
   <Category>
    <Name>type</Name>
    <Pattern>(check|search)</Pattern>
    <Index>1</Index>
   </Category>
  </Categories>
 </Language>

 <!--  Tools  -->

 <tool name="AdaControl">
  <language>Ada</language>
  <initial-cmd-line>-v</initial-cmd-line>
  <switches lines="3" columns="1">
   <title line="1" column="1">
    Rules
   </title>
   <field label="Rules list" switch="-l" separator="&#32;"/>
   <field label="Rules file" switch="-f" separator="&#32;" as-file="true"/>

   <title line="2" column="1">
      Processing
   </title>
   <field label="Project file" switch="-p" separator="&#32;" line="2" column="1" as-file="true"
    tip="Emacs style project file (.adp)"/>
   <check label="Recursive mode" switch="-r" line="2" column="1"
    tip="Process recursively all units the given units depend on"/>
   <check label="Ignore local deactivation" switch="-i" line="2" column="1"
    tip="Ignore local deactivation tags in source file"/>
   <check label="Process spec only" switch="-s" line="2" column="2"/>
   <check label="Compilation unit mode" switch="-u" line="2" column="2"
    tip="Treat all source names as compilation units even if they look like file names"/>

   <title line="3" column="1">
    Output
   </title>
   <check label="Verbose mode" switch="-v" line="3" column="1"
    tip="Displays more information, such as unit name, nil units, ..."/>
   <check label="Debug mode" switch="-d" line="3" column="1"
    tip="Displays debug information, such as output file name, ..."/>
   <field label="Output file" switch="-o" line="3" column="1" separator="&#32;" 
    as-file="true" tip="Output file name"/>
   <check label="Overwrite mode" switch="-w" line="3" column="1"
    tip="Overwrite output file if it exists"/>  

  </switches> 
 </tool>

 <!--  Actions  -->
 
 <action name="Check_Rules" show-command="false" output="none">
  <shell>Project %P</shell>
  <shell>Project.get_tool_switches_as_string %1 AdaControl</shell>
  <external show-command="true" output="">adactl %1 %Ps</external>
  <shell>Locations.parse """%1 """ run</shell>
 </action>

 <!--  Submenus  -->

<menu action="Check_Rules">
   <title>Tools/AdaControl</title>
</menu>
 
</AdaControl>

